# Інструкція для налаштування Sentry

## Що таке Sentry?

Sentry - це сервіс для моніторингу помилок та продуктивності. Він автоматично збирає помилки з вашого додатку та відображає їх у зручному веб-інтерфейсі.

## Переваги Sentry:

- ✅ Автоматичне збирання помилок
- ✅ Детальні стек-трейси
- ✅ Контекст помилок (користувач, браузер, URL тощо)
- ✅ Алерти на email/Slack
- ✅ Історія помилок
- ✅ Групування подібних помилок

## Крок 1: Створення акаунту Sentry

1. Перейдіть на https://sentry.io/signup/
2. Зареєструйтеся або увійдіть
3. Створіть новий проект:
   - **Platform**: Next.js
   - **Project Name**: `p-3-0` (або будь-яка назва)

## Крок 2: Отримання DSN

Після створення проекту Sentry надасть вам **DSN** (Data Source Name) - це унікальний ідентифікатор вашого проекту. Він виглядає приблизно так:

```
https://xxxxx@xxxxx.ingest.sentry.io/xxxxx
```

**Збережіть цей DSN** - він знадобиться для налаштування.

## Крок 3: Встановлення Sentry в проект

Я можу додати Sentry до вашого проекту. Для цього потрібно:

1. Встановити пакет `@sentry/nextjs`
2. Налаштувати конфігурацію Sentry
3. Додати DSN до змінних середовища

**Чи хочете, щоб я зараз налаштував Sentry в проекті?** Якщо так, надайте мені ваш DSN з Sentry, і я все налаштую.

## Крок 4: Додавання DSN до Vercel

Після налаштування потрібно додати змінну середовища в Vercel:

1. Перейдіть в Vercel Dashboard → ваш проект → Settings → Environment Variables
2. Додайте змінну:
   - **Name**: `NEXT_PUBLIC_SENTRY_DSN`
   - **Value**: ваш DSN з Sentry
3. Перезапустіть deployment

## Альтернатива: Debug Endpoint

Я вже створив debug endpoint, який дозволяє перевіряти збережені значення без Sentry:

**URL**: `/api/admin/finance-report/debug?secret=YOUR_CRON_SECRET`

**Приклади використання:**

1. Перевірити всі останні 12 місяців:
   ```
   GET /api/admin/finance-report/debug?secret=YOUR_CRON_SECRET
   ```

2. Перевірити конкретний місяць:
   ```
   GET /api/admin/finance-report/debug?secret=YOUR_CRON_SECRET&year=2025&month=11
   ```

Це допоможе швидко діагностувати проблему з збереженням даних.

## Важливо

**Я не можу бачити логи в реальному часі** - Sentry працює так:
- Помилки автоматично відправляються в Sentry
- Ви переглядаєте їх у Sentry Dashboard
- Я можу допомогти проаналізувати конкретні помилки, якщо ви надасте їх мені

---

**Наступні кроки:**
1. Створіть акаунт Sentry та отримайте DSN
2. Надайте мені DSN, і я налаштую інтеграцію
3. Або використовуйте debug endpoint для діагностики зараз
