import Link from 'next/link'
async function getCampaigns(){const r=await fetch(`${process.env.NEXT_PUBLIC_BASE_URL??''}/api/campaigns`,{cache:'no-store'});return r.json()}
export default async function CampaignsPage(){const data=await getCampaigns();const items=data.items||[];return(<div className='space-y-4'><div className='flex items-center justify-between'><h1 className='text-2xl font-semibold'>Кампанії</h1><Link className='btn btn-primary' href='/admin/campaigns/new'>Нова кампанія</Link></div><div className='card overflow-x-auto'><table className='table'><thead><tr><th>Дата</th><th>Назва</th><th>Сутність</th><th>Enabled</th><th>V1</th><th>V2</th><th>EXP</th><th></th></tr></thead><tbody>{items.map((c:any)=>(<tr key={c.id}><td>{new Date(c.created_at).toLocaleString()}</td><td>{c.name}</td><td className='max-w-[360px] truncate'>база {c.base_pipeline_id}/{c.base_status_id}</td><td>{c.enabled?'yes':'no'}</td><td>{c.v1_count}</td><td>{c.v2_count}</td><td>{c.exp_count}</td><td><Link className='text-blue-600' href={`/admin/campaigns/${c.id}/edit`}>Edit</Link></td></tr>))}</tbody></table></div></div>)}
