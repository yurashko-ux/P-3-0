(()=>{var e={};e.id=1525,e.ids=[1525],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d}),r(9957),r(2675),r(5866);var n=r(3191),l=r(8716),a=r(7922),s=r.n(a),o=r(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["admin",{children:["tools",{children:["move",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9957)),"/Users/mykolay/P-3-0/web/app/admin/tools/move/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2675)),"/Users/mykolay/P-3-0/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/mykolay/P-3-0/web/app/admin/tools/move/page.tsx"],u="/admin/tools/move/page",p={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/admin/tools/move/page",pathname:"/admin/tools/move",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9790:(e,t,r)=>{Promise.resolve().then(r.bind(r,5101))},6847:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5800:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4064,23))},5101:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(326),l=r(7577);function a(){let[e,t]=(0,l.useState)(""),[r,a]=(0,l.useState)([]),[s,o]=(0,l.useState)(""),[i,d]=(0,l.useState)([]),[c,u]=(0,l.useState)(""),[p,f]=(0,l.useState)(!1),[m,b]=(0,l.useState)(null);async function y(t){if(t.preventDefault(),b(null),!e||!s||!c){b("Заповни Card ID, Воронку та Статус.");return}f(!0);try{let t=await fetch("/api/keycrm/card/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({card_id:e.trim(),to_pipeline_id:s,to_status_id:c})}),r=await t.json().catch(()=>({}));t.ok&&r?.ok?b("✅ Перенесено успішно."):b(`❌ Помилка: ${r?.error||`${t.status} ${t.statusText}`}`)}catch(e){b(`❌ Помилка запиту: ${e?.message||"unknown"}`)}finally{f(!1)}}return(0,n.jsxs)("div",{className:"mx-auto max-w-3xl p-6 space-y-6",children:[n.jsx("h1",{className:"text-3xl font-semibold",children:"Тест: Move Card у KeyCRM"}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["Введи ",n.jsx("b",{children:"Card ID"})," з KeyCRM і вибери цільову ",n.jsx("b",{children:"воронку"})," та"," ",n.jsx("b",{children:"статус"}),". Ендпойнт вимагає адмін-куку ",n.jsx("code",{children:"admin_pass"}),"."]}),(0,n.jsxs)("form",{onSubmit:y,className:"space-y-4 rounded-2xl border p-5",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Card ID"}),n.jsx("input",{className:"w-full rounded-xl border px-3 py-2",placeholder:"напр. 123456",value:e,onChange:e=>t(e.target.value)})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Цільова воронка"}),(0,n.jsxs)("select",{className:"w-full rounded-xl border px-3 py-2",value:s,onChange:e=>o(e.target.value),children:[n.jsx("option",{value:"",children:"— Обери воронку —"}),r.map(e=>n.jsx("option",{value:e.id,children:e.title},e.id))]})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm mb-1",children:"Цільовий статус"}),(0,n.jsxs)("select",{className:"w-full rounded-xl border px-3 py-2",value:c,onChange:e=>u(e.target.value),disabled:!s||0===i.length,children:[n.jsx("option",{value:"",children:s?"— Обери статус —":"Спершу вибери воронку"}),i.map(e=>n.jsx("option",{value:e.id,children:e.title},e.id))]})]})]}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("button",{type:"submit",disabled:p,className:"rounded-xl px-5 py-2 border bg-blue-600 text-white disabled:opacity-50",children:p?"Виконую…":"Перенести"})}),m&&n.jsx("div",{className:"text-sm",children:m})]})]})}},9957:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>s,__esModule:()=>a,default:()=>o});var n=r(8570);let l=(0,n.createProxy)(String.raw`/Users/mykolay/P-3-0/web/app/admin/tools/move/page.tsx`),{__esModule:a,$$typeof:s}=l;l.default;let o=(0,n.createProxy)(String.raw`/Users/mykolay/P-3-0/web/app/admin/tools/move/page.tsx#default`)},2675:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>d});var n=r(9510),l=r(18),a=r.n(l);r(7272);var s=r(9720);function o(e=globalThis){let t=(e,t)=>{if("get"in e||"set"in e){let r=e.get?e.get.bind(t):void 0,n=e.set?e.set.bind(t):void 0;return{configurable:e.configurable,enumerable:e.enumerable??!1,get:r,set:n}}if("function"==typeof e.value){let r=e.value.bind(t);return{configurable:e.configurable,enumerable:e.enumerable??!1,writable:e.writable??!1,value:r}}return e},r=(e,t,r,n)=>{let l=t?.enumerable??!1;if(t&&("get"in t||"set"in t)){let a=t.get?t.get.bind(n):void 0,s=t.set?t.set.bind(n):void 0;return{configurable:!0,enumerable:l,get:()=>r.has(e)?void 0:a?a():void 0,set:t=>{r.delete(e),s&&s(t)}}}let a=t?t.value:void 0;return{configurable:!0,enumerable:l,get:()=>r.has(e)?void 0:a,set:t=>{r.delete(e),a=t}}};if(!e||e.__p30SymbolGuarded)return;let n=(e=>{let t=e.Symbol;return"function"==typeof t?t:void 0})(e);if(!n){e.__p30SymbolGuarded=!0;return}let l=new Set(["dispose","asyncDispose"]);n.dispose&&l.add(n.dispose),n.asyncDispose&&l.add(n.asyncDispose);let a=new Set,s=function(e){return n(e)};try{Reflect.defineProperty(s,"name",{configurable:!0,enumerable:!1,writable:!1,value:"Symbol"})}catch{}try{Reflect.defineProperty(s,"length",{configurable:!0,enumerable:!1,writable:!1,value:0})}catch{}try{Reflect.defineProperty(s,"prototype",{configurable:!1,enumerable:!1,writable:!1,value:n.prototype})}catch{}for(let e of Reflect.ownKeys(n)){let o=Reflect.getOwnPropertyDescriptor(n,e);if(o){if(l.has(e)){try{Reflect.defineProperty(s,e,r(e,o,a,n))}catch{}continue}try{Reflect.defineProperty(s,e,t(o,n))}catch{}}}Object.defineProperty(s,"__p30ProxyGuard",{configurable:!1,enumerable:!1,writable:!1,value:!0});try{Object.defineProperty(s,Symbol.toStringTag,{configurable:!0,enumerable:!1,writable:!1,value:"Symbol"})}catch{}let o=e=>!!l.has(e)&&(a.add(e),!0),i=new Proxy(s,{apply:(e,t,r)=>Reflect.apply(n,t,r),deleteProperty(e,t){if(o(t)){try{Reflect.deleteProperty(e,t)}catch{}return!0}try{return Reflect.deleteProperty(n,t)}catch{return!1}},get(e,t,r){if("__p30ProxyGuard"===t)return!0;if(l.has(t)){let n=Reflect.getOwnPropertyDescriptor(e,t);return n?"get"in n&&n.get?n.get.call(r):n.value:void 0}let a=Reflect.get(e,t,r);if("function"==typeof a)try{return a.bind(n)}catch{}return a},has:(e,t)=>l.has(t)?!a.has(t)&&Reflect.has(e,t):Reflect.has(e,t)||Reflect.has(n,t),ownKeys(e){let t=[];for(let r of Reflect.ownKeys(e))!(l.has(r)&&a.has(r))&&("string"!=typeof r&&"symbol"!=typeof r||t.includes(r)||t.push(r));return t},getOwnPropertyDescriptor(e,t){if(l.has(t)){if(a.has(t))return;let r=Reflect.getOwnPropertyDescriptor(e,t);return r&&(r.configurable=!0),r}return Reflect.getOwnPropertyDescriptor(e,t)},set:(e,t,r,n)=>(l.has(t)&&a.delete(t),Reflect.set(e,t,r,n)),defineProperty(e,t,s){if(l.has(t)){a.delete(t);let l=r(t,s,a,n);return Reflect.defineProperty(e,t,l)}return Reflect.defineProperty(e,t,s)}});try{Object.defineProperty(e,"Symbol",{configurable:!0,enumerable:!1,writable:!0,value:i})}catch{e.Symbol=i}let d=function(){};try{Object.defineProperty(e,"lockdown",{configurable:!0,enumerable:!1,writable:!0,value:d})}catch{e.lockdown=d}let c=e.ses;if(c)try{Object.defineProperty(c,"lockdown",{configurable:!0,enumerable:!1,writable:!0,value:d})}catch{c.lockdown=d}"function"!=typeof e.harden&&(e.harden=e=>e),e.__p30SymbolGuarded=!0}let i=`;(${o.toString()})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : undefined);`;o();let d={title:"P-3-0",description:"Admin console"};function c({children:e}){return(0,n.jsxs)("html",{lang:"uk",className:a().className,children:[n.jsx("head",{children:n.jsx(s.default,{id:"p30-lockdown-guard",strategy:"beforeInteractive",dangerouslySetInnerHTML:{__html:i}})}),n.jsx("body",{children:e})]})}},7272:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[8948,4818],()=>r(4296));module.exports=n})();