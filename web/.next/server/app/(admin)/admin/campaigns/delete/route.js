"use strict";(()=>{var e={};e.id=8333,e.ids=[8333],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5658:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>S,patchFetch:()=>_,requestAsyncStorage:()=>v,routeModule:()=>$,serverHooks:()=>P,staticGenerationAsyncStorage:()=>x});var a={};r.r(a),r.d(a,{GET:()=>b});var n=r(9303),i=r(8716),o=r(670),s=r(7070);let c=(process.env.KV_REST_API_URL||"").replace(/\/$/,""),l=process.env.KV_REST_API_TOKEN||"",u=process.env.KV_REST_API_READ_ONLY_TOKEN||l,p="campaign:index",d=e=>`campaign:${e}`;function m(e=!1){return{"Content-Type":"application/json",Authorization:`Bearer ${e?u:l}`}}async function f(e,t=!0){let r=await fetch(`${c}/${e}`,{headers:m(t),cache:"no-store"});if(!r.ok)throw Error(`${e} ${r.status}`);return r}async function y(e,t,r=!1){let a=await fetch(`${c}/${e}`,{method:"POST",headers:m(r),body:"string"==typeof t?t:JSON.stringify(t)});if(!a.ok)throw Error(`${e} ${a.status}`);return a}async function h(e){try{await y(`del/${encodeURIComponent(e)}`,"",!1)}catch{}}async function g(e,t){for(let r of[{path:`lrem/${encodeURIComponent(e)}/0`,body:{value:t}},{path:`lrem/${encodeURIComponent(e)}/0`,body:{element:t}},{path:`lrem/${encodeURIComponent(e)}/0`,body:{member:t}}])try{await y(r.path,r.body,!1)}catch{}}async function A(e){let t=await f(`lrange/${encodeURIComponent(e)}/0/-1`,!0).catch(()=>null);if(!t)return[];let r="";try{r=await t.text()}catch{return[]}let a=null;try{a=JSON.parse(r)}catch{a=r}let n=[];if(Array.isArray(a))n=a;else if(a&&Array.isArray(a.result))n=a.result;else if(a&&Array.isArray(a.data))n=a.data;else if("string"==typeof a)try{let e=JSON.parse(a);Array.isArray(e)?n=e:e&&Array.isArray(e.result)?n=e.result:e&&Array.isArray(e.data)&&(n=e.data)}catch{}return n.map(e=>"string"==typeof e?e:e?.value??e?.member??e?.id??"").filter(Boolean).map(String)}async function w(e,t){for(let r=t.length-1;r>=0;r--){let a=t[r];try{await y(`lpush/${encodeURIComponent(e)}`,{value:a},!1)}catch{}}}function R(e,t=8){if(null==e||t<=0)return"";if("number"==typeof e)return String(e);if("string"==typeof e){let r=e.trim();for(let e=0;e<6;e++)try{let e=JSON.parse(r);if("string"==typeof e||"number"==typeof e)return R(e,t-1);if(e&&"object"==typeof e){let r=e.value??e.id??e.member??"";if(r)return R(r,t-1)}break}catch{break}let a=(r=r.replace(/\\+/g,"").replace(/^"+|"+$/g,"")).match(/\d{10,}/);return a?a[0]:""}return"object"==typeof e?R(e.value??e.id??e.member??"",t-1):""}async function b(e){let t=new URL("/admin/campaigns?deleted=1",e.url);try{if(!c||!l)return s.NextResponse.redirect(t);let r=new URL(e.url).searchParams.get("id")||"";if(!r)return s.NextResponse.redirect(t);let a=R(r);await g(p,r),a&&await g(p,a),a&&await h(d(a));let n=await A(p);if(n.some(e=>R(e)===a||e===r)){let e=n.filter(e=>{let t=R(e);return!(t&&a&&t===a)&&e!==r});await h(p),e.length&&await w(p,e)}return s.NextResponse.redirect(t)}catch{return s.NextResponse.redirect(t)}}let $=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/(admin)/admin/campaigns/delete/route",pathname:"/admin/campaigns/delete",filename:"route",bundlePath:"app/(admin)/admin/campaigns/delete/route"},resolvedPagePath:"/Users/mykolay/P-3-0/web/app/(admin)/admin/campaigns/delete/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:v,staticGenerationAsyncStorage:x,serverHooks:P}=$,S="/(admin)/admin/campaigns/delete/route";function _(){return(0,o.patchFetch)({serverHooks:P,staticGenerationAsyncStorage:x})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972],()=>r(5658));module.exports=a})();