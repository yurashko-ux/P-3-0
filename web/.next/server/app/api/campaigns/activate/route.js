"use strict";(()=>{var e={};e.id=4057,e.ids=[4057],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7557:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>k,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>g});var r={};a.r(r),a.d(r,{POST:()=>d,dynamic:()=>c,runtime:()=>p});var s=a(9303),i=a(8716),n=a(670),o=a(7070),u=a(4332);let p="nodejs",c="force-dynamic";async function d(e){if(!function(e){let t=e.headers.get("x-admin-token")||"",a=e.cookies.get("admin_token")?.value||"",r=t||a;return!!r&&r===process.env.ADMIN_PASS}(e))return o.NextResponse.json({ok:!1,error:"unauthorized"},{status:401});try{let t;let a=await e.json().catch(()=>({})),r=(a?.id??"").toString().trim();if(!r)return o.NextResponse.json({ok:!1,error:"missing id"},{status:400});let s=u.campaignKeys.ITEM_KEY(r),i=await u.kvRead.getRaw(s);if(!i)return o.NextResponse.json({ok:!1,error:"not found"},{status:404});try{t=JSON.parse(i)}catch{return o.NextResponse.json({ok:!1,error:"corrupt item"},{status:500})}let n="boolean"==typeof a.active?a.active:!(!1!==t.active);t.active=n,await u.kvWrite.setRaw(s,JSON.stringify(t));try{await u.kvWrite.lpush(u.campaignKeys.INDEX_KEY,r)}catch{}return o.NextResponse.json({ok:!0,item:t})}catch(e){return o.NextResponse.json({ok:!1,error:e?.message||"toggle failed"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/campaigns/activate/route",pathname:"/api/campaigns/activate",filename:"route",bundlePath:"app/api/campaigns/activate/route"},resolvedPagePath:"/Users/mykolay/P-3-0/web/app/api/campaigns/activate/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:v}=m,k="/api/campaigns/activate/route";function x(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,5972,4332],()=>a(7557));module.exports=r})();