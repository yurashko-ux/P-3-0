"use strict";(()=>{var e={};e.id=6226,e.ids=[6226],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1986:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>R,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>v,serverHooks:()=>_,staticGenerationAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{GET:()=>p,dynamic:()=>u});var a=r(9303),n=r(8716),o=r(670),c=r(7070),i=r(4332);let u="force-dynamic";async function p(e){if(!function(e){let t=e.nextUrl.searchParams.get("secret"),r=process.env.CRON_SECRET||"";return r&&t&&r===t}(e))return c.NextResponse.json({error:"Unauthorized"},{status:401});let t="finance:test:kv:write-read",r=`test-${Date.now()}`;try{let e=!!(process.env.KV_REST_API_URL||process.env.VERCEL_KV_REST_API_URL||process.env.VERCEL_KV_URL||process.env.KV_URL),s=!!(process.env.KV_REST_API_TOKEN||process.env.VERCEL_KV_REST_API_TOKEN||process.env.KV_REST_API_WRITE_ONLY_TOKEN||process.env.KV_WRITE_ONLY_TOKEN||process.env.KV_TOKEN),a={success:!1};try{await i.kvWrite.setRaw(t,r),a={success:!0}}catch(e){a={success:!1,error:e?.message||String(e)}}let n={success:!1,value:null};try{let e=await i.kvRead.getRaw(t);n={success:!0,value:e}}catch(e){n={success:!1,value:null,error:e?.message||String(e)}}let o=n.value===r;return c.NextResponse.json({env:{hasKvUrl:e,hasKvToken:s},test:{key:t,savedValue:r,readValue:n.value,valuesMatch:o},save:a,read:n,conclusion:o?"✅ KV працює правильно - дані зберігаються та читаються":"❌ KV не працює - дані не зберігаються або не читаються правильно"})}catch(e){return c.NextResponse.json({error:String(e?.message||e),stack:e?.stack},{status:500})}}let v=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/finance-report/test-kv/route",pathname:"/api/admin/finance-report/test-kv",filename:"route",bundlePath:"app/api/admin/finance-report/test-kv/route"},resolvedPagePath:"/Users/mykolay/P-3-0/web/app/api/admin/finance-report/test-kv/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:_}=v,R="/api/admin/finance-report/test-kv/route";function m(){return(0,o.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:d})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972,4332],()=>r(1986));module.exports=s})();