"use strict";(()=>{var e={};e.id=6368,e.ids=[6368],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1817:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>P,patchFetch:()=>R,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>y});var a={};t.r(a),t.d(a,{GET:()=>m,dynamic:()=>p});var s=t(9303),n=t(8716),i=t(670),o=t(7070);let p="force-dynamic",c=process.env.KEYCRM_BASE_URL??"https://openapi.keycrm.app/v1",u=process.env.KEYCRM_API_TOKEN??"";async function d(e,r){if(!u)throw Error("Missing KEYCRM_API_TOKEN");return await fetch(`${c}${e}`,{headers:{Authorization:`Bearer ${u}`,Accept:"application/json","Content-Type":"application/json"},...r,cache:"no-store"})}async function m(e){try{let r=new URL(e.url),t=r.searchParams.get("pipeline_id"),a=r.searchParams.get("status_id"),s=r.searchParams.get("page")??"1",n=r.searchParams.get("per_page")??"50";if(!t||!a)return o.NextResponse.json({ok:!1,error:"pipeline_id and status_id are required"},{status:400});let i=new URLSearchParams({page:s,per_page:n,pipeline_id:t,status_id:a}),p=await d(`/pipelines/cards?${i.toString()}`),c=await p.json();return o.NextResponse.json(c,{status:p.status})}catch(e){return o.NextResponse.json({ok:!1,error:e?.message??"KeyCRM fetch failed"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/keycrm/cards/route",pathname:"/api/keycrm/cards",filename:"route",bundlePath:"app/api/keycrm/cards/route"},resolvedPagePath:"/Users/mykolay/P-3-0/web/app/api/keycrm/cards/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:y,serverHooks:g}=l,P="/api/keycrm/cards/route";function R(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:y})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[8948,5972],()=>t(1817));module.exports=a})();