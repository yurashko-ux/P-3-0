"use strict";(()=>{var e={};e.id=7375,e.ids=[7375,7560],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},3042:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>E,patchFetch:()=>x,requestAsyncStorage:()=>_,routeModule:()=>m,serverHooks:()=>T,staticGenerationAsyncStorage:()=>g});var r={};a.r(r),a.d(r,{GET:()=>p,dynamic:()=>v,runtime:()=>l});var o=a(9303),n=a(8716),s=a(670),d=a(7070),i=a(4332),c=a(3903),u=a(7560);let l="nodejs",v="force-dynamic";async function p(e){try{let t=e.nextUrl.searchParams.get("campaign_id");if(!t)return d.NextResponse.json({error:"campaign_id parameter is required"},{status:400});let a=i.campaignKeys.ITEM_KEY(t),r=await i.kvRead.getRaw(a),o=r?(0,c.b)(r):null,n=null;try{n=await u.kv.get(a)}catch(e){}let s=(await i.kvRead.listCampaigns()).find(e=>e.id===t||e.__index_id===t);return d.NextResponse.json({campaignId:t,itemKey:a,sources:{kvRead:{hasRaw:!!r,rawLength:r?.length,normalized:o?{id:o.id,name:o.name,v1_count:o.v1_count,v2_count:o.v2_count,exp_count:o.exp_count,counters:o.counters,movedTotal:o.movedTotal,movedV1:o.movedV1,movedV2:o.movedV2,movedExp:o.movedExp,baseCardsCount:o.baseCardsCount,baseCardsTotalPassed:o.baseCardsTotalPassed}:null},vercelKv:{hasData:!!n,data:n?{id:n.id,name:n.name,v1_count:n.v1_count,v2_count:n.v2_count,exp_count:n.exp_count,counters:n.counters,movedTotal:n.movedTotal,movedV1:n.movedV1,movedV2:n.movedV2,movedExp:n.movedExp,baseCardsCount:n.baseCardsCount,baseCardsTotalPassed:n.baseCardsTotalPassed}:null},listCampaigns:s?{id:s.id,name:s.name,v1_count:s.v1_count,v2_count:s.v2_count,exp_count:s.exp_count,counters:s.counters,movedTotal:s.movedTotal,movedV1:s.movedV1,movedV2:s.movedV2,movedExp:s.movedExp,baseCardsCount:s.baseCardsCount,baseCardsTotalPassed:s.baseCardsTotalPassed}:null}})}catch(e){return d.NextResponse.json({error:"internal_error",message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/debug/campaign-counters/route",pathname:"/api/debug/campaign-counters",filename:"route",bundlePath:"app/api/debug/campaign-counters/route"},resolvedPagePath:"/Users/mykolay/P-3-0/web/app/api/debug/campaign-counters/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:_,staticGenerationAsyncStorage:g,serverHooks:T}=m,E="/api/debug/campaign-counters/route";function x(){return(0,s.patchFetch)({serverHooks:T,staticGenerationAsyncStorage:g})}},7560:(e,t,a)=>{a.d(t,{kv:()=>d});var r=a(242),o=null;process.env.UPSTASH_DISABLE_TELEMETRY="1";var n=class extends r.Redis{async *scanIterator(e){let t,a=0;do for(let r of([a,t]=await this.scan(a,e),t))yield r;while(0!==a)}async *hscanIterator(e,t){let a,r=0;do for(let o of([r,a]=await this.hscan(e,r,t),a))yield o;while(0!==r)}async *sscanIterator(e,t){let a,r=0;do for(let o of([r,a]=await this.sscan(e,r,t),a))yield o;while(0!==r)}async *zscanIterator(e,t){let a,r=0;do for(let o of([r,a]=await this.zscan(e,r,t),a))yield o;while(0!==r)}};function s(e){return new n({cache:"default",...e})}new Proxy({},{get(e,t,a){if("then"===t||"parse"===t)return Reflect.get(e,t,a);if(!o){if(!process.env.KV_REST_API_URL||!process.env.KV_REST_API_TOKEN)throw Error("@vercel/kv: Missing required environment variables KV_REST_API_URL and KV_REST_API_TOKEN");console.warn('\x1b[33m"The default export has been moved to a named export and it will be removed in version 1, change to import { kv }\x1b[0m"'),o=s({url:process.env.KV_REST_API_URL,token:process.env.KV_REST_API_TOKEN})}return Reflect.get(o,t)}});var d=new Proxy({},{get(e,t){if(!o){if(!process.env.KV_REST_API_URL||!process.env.KV_REST_API_TOKEN)throw Error("@vercel/kv: Missing required environment variables KV_REST_API_URL and KV_REST_API_TOKEN");o=s({url:process.env.KV_REST_API_URL,token:process.env.KV_REST_API_TOKEN})}return Reflect.get(o,t)}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,5972,242,4332],()=>a(3042));module.exports=r})();