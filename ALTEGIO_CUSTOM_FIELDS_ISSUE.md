# Проблема з отриманням custom_fields через Altegio API

## Поточна ситуація

API повертає тільки базові поля клієнта:
- `id`
- `name`
- `phone`
- `email`
- `last_visit_date`

**НЕ повертає:**
- `custom_fields` (з Instagram username, Card number, Note)
- Інші додаткові поля

## Можливі причини

1. **Custom_fields вимагають спеціального запиту**
   - Можливо, потрібен окремий endpoint
   - Можливо, потрібні додаткові параметри

2. **Обмеження API**
   - Можливо, API не повертає custom_fields через безпеку
   - Можливо, потрібні додаткові права доступу

3. **Інша структура даних**
   - Можливо, поля зберігаються не в `custom_fields`, а в іншому місці
   - Можливо, потрібно використовувати інші назви полів

## Спробовані варіанти

1. ✅ `POST /company/{id}/clients` - працює, але повертає тільки ID
2. ✅ `POST /company/{id}/clients/search` - очікується результат
3. ❓ `GET /company/{id}/client/{id}` - повертає базові поля без custom_fields
4. ❓ Різні варіанти з `include[]=custom_fields`, `fields[]=custom_fields`

## Рекомендації

### Варіант 1: Звернутися до підтримки Altegio

Надіслати запит з питанням:
- Чи підтримується отримання custom_fields через API?
- Який правильний endpoint/параметри для отримання custom_fields?
- Чи потрібні додаткові права доступу?

### Варіант 2: Альтернативні підходи

1. **Використати вебхуки Altegio**
   - Отримувати події зміни клієнтів
   - Вебхуки можуть містити повну інформацію

2. **Експорт через інтерфейс Altegio**
   - Якщо є можливість експорту в Excel/CSV
   - Імпортувати дані в нашу систему

3. **Використати інші поля**
   - Якщо custom_fields недоступні, використати поля `note` або `comment`
   - Перевірити, чи можна зберігати Instagram в стандартних полях

### Варіант 3: Робота без custom_fields

Якщо API не повертає custom_fields:
- Зберігати Instagram username в окремій базі даних (Vercel KV)
- Зв'язувати по `client_id` або `phone`
- Оновлювати через вебхуки або ручний ввід

## Наступні кроки

1. Перевірити логи Vercel після останніх змін
2. Перевірити документацію Altegio про custom_fields
3. Написати в підтримку Altegio з питанням про custom_fields API
4. Розглянути альтернативні підходи

